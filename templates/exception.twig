{% import 'macros.twig' as functions %}

<!doctype html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Error dumper</title>
    {% include 'exception-css.twig' %}
</head>
<body>
<div class="container">
    <h1>Error!</h1>

    {{ constant('Awesomite\\ErrorDumper\\Views\\ViewHtml::TAG_UNDER_TITLE')|raw }}

    {{ contentUnderTitle|raw }}

    {% set hasContext = exception.getContext|length > 0 %}

    <div class="padding-menu">
        <ul class="nav nav-pills" data-tabs="main-tabs">
            {{ functions.exceptionChainPills(exception) }}
            {% if hasContext %}
                <li><a href="#main-context" data-toggle="tab">Context</a></li>
            {% endif %}
        </ul>
        <div class="tab-content">
            {{ functions.exceptionChain(exception, editor, hasEditor) }}
            {% if hasContext %}
                <div class="tab-pane fade" id="main-context">
                    {% include 'exception-context.twig' %}
                </div>
            {% endif %}
        </div>
    </div>

    <footer>
        <p class="pull-right small">
            Generated by <a href="https://github.com/awesomite/error-dumper" target="_blank" rel="noopener noreferrer">ErrorDumper</a>
            &bull; PHP {{ constant('PHP_VERSION') }}
            &bull; {{ memoryUsage() }}
        </p>
    </footer>
</div>

{% autoescape 'html_attr' %}
    {% for js in resources.js %}
        <script
                type="text/javascript"
                src="{{ js.link }}"
                integrity="{{ js.integrity }}"
                crossorigin="anonymous"
        ></script>
    {% endfor %}
{% endautoescape %}

{{ constant('Awesomite\\ErrorDumper\\Views\\ViewHtml::TAG_HTML')|raw }}

{% for part in appendToBody %}
    {{ part|raw }}
{% endfor %}
</body>
</html>
